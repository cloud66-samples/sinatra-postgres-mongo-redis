#
#   For Help
#
#   Manifest Docs
#   http://help.cloud66.com/stack-features/manifest-files.html
#
#   Instance Names
#   http://help.cloud66.com/api/basics/instance-names.html
#
#   Instance Regions
#   http://help.cloud66.com/api/basics/instance-regions.html
#
#

---

defaults: &defaults
  environment_variables: &environment_vars
    MODULE_URL: https://github.com/openresty/headers-more-nginx-module/archive/v0.25.tar.gz
    ASSETS_DIGEST: true
    ASSETS_PREFIX: /assets-build
  sinatra: &rails
    configuration: &rails_config
      asset_pipeline_precompile: true
      do_initial_db_schema_load: true
      ruby_version: 2.2.2
    server: &rails_server
      unique_name: web1
      vendor: aws
      region: us-east-1
  postgresql: &pg
    server: external
  redis: &redis
    server: external


qa:
  <<: *defaults
  sinatra:
    <<: *rails
    configuration:
      <<: *rails_config
      vpc_id: vpc-4c187228 #infl-qa-vpc
      root_disk_type: ssd
    server:
      <<: *rails_server
      subnet_id: subnet-91f51bbb #infl-qa-pub-1a
      size: t2.small
      availability_zone: us-east-1a


staging:
  <<: *defaults
  rails:
    <<: *rails
    configuration:
      <<: *rails_config
      vpc_id: vpc-1edfa77a #infl-stg-vpc
      root_disk_type: ssd
    server:
      <<: *rails_server
      subnet_id: subnet-5867c92e # infl-stg-pub-1b
      size: t2.small


production:
  <<: *defaults
  rails:
    <<: *rails
    configuration:
      <<: *rails_config
      vpc_id: vpc-25334641
      root_disk_type: ssd
    server:
      <<: *rails_server
      subnet_id: subnet-56b8440e # infl-prd-pub-1c
      size: t2.small
